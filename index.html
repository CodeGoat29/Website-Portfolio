<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeGoat's Tech Blog</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="header-top">
            <h1>CodeGoat</h1>
            <div class="header-nav">
                <nav>
                    <a href="index.html">Home</a>
                    <a href="about.html">About</a>
                    <button class="search-button" id="search-button" aria-label="Search">üîç</button>
                </nav>
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
                    <div class="theme-toggle-slider">üåô</div>
                </button>
            </div>
        </div>
        <p class="tagline">Documenting my homelab, tech experiments, and cybersecurity journey.</p>
    </header>

    <!-- Search Modal -->
    <div class="search-modal" id="search-modal">
        <div class="search-modal-content">
            <div class="search-modal-header">
                <h3>Search Posts</h3>
                <button class="close-search" id="close-search" aria-label="Close search">√ó</button>
            </div>
            <input type="text" id="searchBar" placeholder="Search posts..." autofocus />
            <ul id="searchResults"></ul>
        </div>
    </div>

    <main>
        <section class="intro">
            <h2>Welcome</h2>
            <p>
                I'm building and documenting my homelab projects using Proxmox, Ubuntu Server, Docker, and more. 
                This site serves as my personal knowledge base and a way to share what I learn.
            </p>
        </section>
        <section class="posts">
            <h2>Recent Posts</h2>
            <ul id="postList">
                <li><a href="posts/first-post.html">Setting Up Proxmox and Docker in My Homelab</a> - October 2025</li>
                <li><a href="posts/network-segmentation.html">Network Segmentation in a Home Lab</a> - September 2025</li>
                <li><a href="posts/vulnerability-scanning.html">Using OpenVAS for Vulnerability Scanning</a> - August 2025</li>
            </ul>
        </section>
    </main>
    <footer>
        <p>¬© 2025 CodeGoat | <a href="https://github.com/codegoat29">GitHub</a></p>
    </footer>
    <script>
        // Post data
        const posts = [
            { title: 'Setting Up Proxmox and Docker in My Homelab', url: 'posts/first-post.html', date: 'October 2025' },
            { title: 'Network Segmentation in a Home Lab', url: 'posts/network-segmentation.html', date: 'September 2025' },
            { title: 'Using OpenVAS for Vulnerability Scanning', url: 'posts/vulnerability-scanning.html', date: 'August 2025' }
        ];

        // Dark Mode Toggle
        const toggleButton = document.getElementById('theme-toggle');
        const slider = toggleButton.querySelector('.theme-toggle-slider');
        
        toggleButton.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            slider.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
        });
        
        // Search Modal
        const searchButton = document.getElementById('search-button');
        const searchModal = document.getElementById('search-modal');
        const closeSearch = document.getElementById('close-search');
        const searchBar = document.getElementById('searchBar');
        const searchResults = document.getElementById('searchResults');
        
        searchButton.addEventListener('click', () => {
            searchModal.classList.add('active');
            searchBar.focus();
        });
        
        closeSearch.addEventListener('click', () => {
            searchModal.classList.remove('active');
            searchBar.value = '';
            displaySearchResults(posts);
        });
        
        searchModal.addEventListener('click', (e) => {
            if (e.target === searchModal) {
                searchModal.classList.remove('active');
                searchBar.value = '';
                displaySearchResults(posts);
            }
        });
        
        // ESC key to close modal
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && searchModal.classList.contains('active')) {
                searchModal.classList.remove('active');
                searchBar.value = '';
                displaySearchResults(posts);
            }
        });
        
        // Search functionality
        function displaySearchResults(results) {
            searchResults.innerHTML = '';
            
            if (results.length === 0) {
                searchResults.innerHTML = '<div class="no-results">No posts found</div>';
                return;
            }
            
            results.forEach(post => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="${post.url}">${post.title}</a> - ${post.date}`;
                searchResults.appendChild(li);
            });
        }
        
        searchBar.addEventListener('input', () => {
            const query = searchBar.value.toLowerCase();
            const filtered = posts.filter(post => 
                post.title.toLowerCase().includes(query) || 
                post.date.toLowerCase().includes(query)
            );
            displaySearchResults(filtered);
        });
        
        // Initialize with all posts
        displaySearchResults(posts);
    </script>
</body>
</html>
