<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asterisk Commands - DiPiazza</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="icon" type="image/png" href="../images/thegoat.png">
    <style>
        /* Override grid for asterisk commands - full width cards */
        .command-category .category-content {
            grid-template-columns: 1fr !important;
        }

        /* Better collapse animation */
        .category-content {
            display: grid;
            transition: opacity 0.2s ease-out;
            opacity: 1;
        }

        .category-content.collapsed {
            display: none;
            opacity: 0;
        }

        /* Search Modal */
        .search-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .search-modal.show {
            display: flex;
        }

        .search-modal-content {
            background: white;
            padding: 32px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .dark-mode .search-modal-content {
            background: #1c2938;
        }

        .search-modal h3 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .search-modal-fields {
            display: grid;
            gap: 12px;
            margin-bottom: 20px;
        }

        .search-modal-field span {
            display: block;
            font-size: 0.85em;
            color: #657786;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .dark-mode .search-modal-field span {
            color: #8899a6;
        }

        .search-modal-input {
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
        }

        .dark-mode .search-modal-input {
            background: #0f1419;
            color: var(--primary-blue);
            border-color: #2a3f5f;
        }

        .search-modal-buttons {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .search-modal-btn {
            padding: 10px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .search-modal-btn.btn-search {
            background: var(--primary-blue);
            color: white;
        }

        .search-modal-btn.btn-search:hover {
            background: var(--main-blue);
        }

        .search-modal-btn.btn-cancel {
            background: #e1e8ed;
            color: #2c3e50;
        }

        .dark-mode .search-modal-btn.btn-cancel {
            background: #2a3f5f;
            color: #e4e6eb;
        }

        .search-modal-btn.btn-cancel:hover {
            background: #657786;
            color: white;
        }
    </style>
</head>
<body>
    <div class="top-controls">
        <div class="dark-mode-toggle">
            <input type="checkbox" id="darkModeToggle" class="toggle-checkbox">
            <label for="darkModeToggle" class="toggle-label">
                <span class="toggle-switch"></span>
            </label>
        </div>
    </div>

        <header>
        <div class="container header-content">
            <a href="../index.html" class="logo-link"><img src="/images/thegoat.png" alt="DiPiazza Logo" class="logo"></a>
            <div class="header-text">
                <h1>DiPiazza</h1>
                <p class="tagline">Where I break stuff, then write about it.</p>
            </div>
            <nav>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../resources.html" class="active">Resources</a></li>
                    <li><a href="../blog.html">Blog</a></li>
                    <li><a href="../resume.html">Resume</a></li>
                    <li><button class="nav-cta" type="button" data-contact-open>Get in Touch</button></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="notes-header commands-header">
            <h1>Asterisk Command Reference</h1>
            <p class="subtitle">Quick reference guide for VoIP troubleshooting and server management</p>
            
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search" autocomplete="off">
                <div id="searchResults" class="search-results"></div>
            </div>

            <div class="quick-nav">
                <h3>Quick Navigation</h3>
                <div class="nav-links">
                    <a href="#network" class="nav-link">Network Diagnostics</a>
                    <a href="#grep" class="nav-link">Log Analysis</a>
                    <a href="#asterisk" class="nav-link">Asterisk Management</a>
                    <a href="#system" class="nav-link">System Resources</a>
                    <a href="#services" class="nav-link">Service Controls</a>
                    <a href="#files" class="nav-link">File Locations</a>
                    <a href="#find" class="nav-link">Find Commands</a>
                </div>
            </div>
        </section>

        <div class="favorites-section" id="favoritesSection" style="display: none;">
            <h2>Favorite Commands</h2>
            <div id="favoritesList" class="favorites-list"></div>
        </div>

        <section id="network" class="command-category">
            <h2 class="category-toggle">Network Diagnostics</h2>
            <div class="category-content">
            
            <div class="command-card" data-tags="network dns ip lookup nslookup">
                <div class="command-header">
                    <h3>DNS Lookup & Public IP</h3>
                    <button class="favorite-btn" data-command="nslookup">☆</button>
                </div>
                <p class="command-description">Resolves domain names to IP addresses and retrieves your public IP address using OpenDNS resolver.</p>
                <div class="command-block">
                    <code>nslookup myip.opendns.com. resolver1.opendns.com</code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-notes">
                    <strong>Use case:</strong> Quickly determine the public IP address of a client or server without visiting external websites.
                </div>
            </div>

            <div class="command-card" data-tags="network public ip curl">
                <div class="command-header">
                    <h3>Public IP (curl ifconfig.me)</h3>
                    <button class="favorite-btn" data-command="curl-ifconfig">☆</button>
                </div>
                <p class="command-description">Fetch the public IP address using ifconfig.me.</p>
                <div class="command-block">
                    <code>curl ifconfig.me</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="network trace tracert path routing">
                <div class="command-header">
                    <h3>Trace Route</h3>
                    <button class="favorite-btn" data-command="tracert">☆</button>
                </div>
                <p class="command-description">Maps the complete network path packets take from source to destination.</p>
                <div class="command-block" data-template="tracert {destination}">
                    <code>tracert <span class="placeholder">destination</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-notes">
                    <strong>Use case:</strong> Diagnose where network delays or failures occur in the routing path.
                </div>
            </div>

            <div class="command-card" data-tags="network ping connectivity">
                <div class="command-header">
                    <h3>Ping Test</h3>
                    <button class="favorite-btn" data-command="ping">☆</button>
                </div>
                <p class="command-description">Tests network connectivity and measures round-trip time.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-t</code> runs a continuous ping until stopped.
                </div>
                <div class="command-block" data-template="ping {host}">
                    <code>ping <span class="placeholder">hostname</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block" data-template="ping -t {host}">
                    <code>ping -t <span class="placeholder">hostname</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="network arp mac address">
                <div class="command-header">
                    <h3>ARP Table</h3>
                    <button class="favorite-btn" data-command="arp">☆</button>
                </div>
                <p class="command-description">Displays the Address Resolution Protocol table.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-a</code> shows all entries in the ARP table.
                </div>
                <div class="command-block">
                    <code>arp -a</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="mtr traceroute ping network">
                <div class="command-header">
                    <h3>MTR - Network Path Analysis</h3>
                    <button class="favorite-btn" data-command="mtr">☆</button>
                </div>
                <p class="command-description">Combines traceroute and ping functionality.</p>
                <div class="command-block" data-template="mtr {host}">
                    <code>mtr <span class="placeholder">hostname</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            </div>
        </section>

        <section id="grep" class="command-category">
            <h2 class="category-toggle">Log Analysis (Grep)</h2>
            <div class="category-content">
            
            <div class="command-card" data-tags="grep log search">
                <div class="command-header">
                    <h3>Search Current Day Logs</h3>
                    <button class="favorite-btn" data-command="grep-current">☆</button>
                </div>
                <p class="command-description">Search today's Asterisk full log for specific keywords.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-i</code> ignores case while matching.
                </div>
                <div class="command-block" data-has-search="true" data-template="grep -i {search} /var/log/asterisk/full">
                    <code>grep -i <span class="placeholder">searchword</span> /var/log/asterisk/full</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="grep recursive search">
                <div class="command-header">
                    <h3>Recursive Grep</h3>
                    <button class="favorite-btn" data-command="grep-recursive">☆</button>
                </div>
                <p class="command-description">Recursively search through all files.</p>
                <div class="command-notes">
                    <strong>Flags:</strong> <code>-r</code> searches directories recursively; <code>-i</code> ignores case.
                </div>
                <div class="command-block" data-has-search="true" data-template='grep -r "{search}" /var/log/asterisk/'>
                    <code>grep -r "<span class="placeholder">searchword</span>" /var/log/asterisk/</code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block" data-has-search="true" data-template='grep -ri "{search}" /var/log/asterisk/'>
                    <code>grep -ri "<span class="placeholder">searchword</span>" /var/log/asterisk/</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="grep zgrep historical">
                <div class="command-header">
                    <h3>Search Historical Logs</h3>
                    <button class="favorite-btn" data-command="zgrep">☆</button>
                </div>
                <p class="command-description">Search compressed archived logs.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-i</code> ignores case while matching.
                </div>
                <div class="command-block" data-has-search="true" data-template='zgrep -i "{search}" /var/log/asterisk/full*.*'>
                    <code>zgrep -i "<span class="placeholder">searchword</span>" /var/log/asterisk/full*.*</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="syslog tail follow">
                <div class="command-header">
                    <h3>Tail Syslog (Live)</h3>
                    <button class="favorite-btn" data-command="syslog-tail">☆</button>
                </div>
                <p class="command-description">Follow the system log in real time.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-f</code> follows the log as new lines are added.
                </div>
                <div class="command-block">
                    <code>tail -f /var/log/syslog</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            </div>
        </section>

        <section id="asterisk" class="command-category">
            <h2 class="category-toggle">Asterisk Management</h2>
            <div class="category-content">

            <div class="command-card" data-tags="asterisk channel hangup">
                <div class="command-header">
                    <h3>Hangup Specific Channel</h3>
                    <button class="favorite-btn" data-command="channel-hangup">☆</button>
                </div>
                <p class="command-description">Forcefully terminate a specific channel.</p>
                <div class="command-block" data-template="sudo channel request hangup '{channel}'">
                    <code>sudo channel request hangup '<span class="placeholder">channel name</span>'</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="asterisk version">
                <div class="command-header">
                    <h3>Check Asterisk Version</h3>
                    <button class="favorite-btn" data-command="asterisk-version">☆</button>
                </div>
                <p class="command-description">Display the current Asterisk version.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-rx</code> runs an Asterisk CLI command and exits.
                </div>
                <div class="command-block">
                    <code>sudo asterisk -rx 'core show version'</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="voicemail users">
                <div class="command-header">
                    <h3>Show Voicemail Users</h3>
                    <button class="favorite-btn" data-command="voicemail-users">☆</button>
                </div>
                <p class="command-description">Display all configured voicemail boxes.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-rx</code> runs an Asterisk CLI command and exits.
                </div>
                <div class="command-block">
                    <code>sudo asterisk -rx 'voicemail show users'</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="hints blf">
                <div class="command-header">
                    <h3>Show Hints/BLF Status</h3>
                    <button class="favorite-btn" data-command="hints">☆</button>
                </div>
                <p class="command-description">Display all configured hints for BLF monitoring.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-rx</code> runs an Asterisk CLI command and exits.
                </div>
                <div class="command-block">
                    <code>sudo asterisk -rx 'core show hints'</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="dialplan show">
                <div class="command-header">
                    <h3>Show Dialplan</h3>
                    <button class="favorite-btn" data-command="dialplan">☆</button>
                </div>
                <p class="command-description">Display the complete dialplan configuration.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-rx</code> runs an Asterisk CLI command and exits.
                </div>
                <div class="command-block">
                    <code>sudo asterisk -rx 'dialplan show'</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="channels watch monitor">
                <div class="command-header">
                    <h3>Monitor Channels (Auto-Refresh)</h3>
                    <button class="favorite-btn" data-command="watch-channels">☆</button>
                </div>
                <p class="command-description">Continuously monitor active channels.</p>
                <div class="command-notes">
                    <strong>Flags:</strong> <code>-n 1</code> refreshes the output every 1 second; <code>-rx</code> runs an Asterisk CLI command and exits.
                </div>
                <div class="command-block">
                    <code>watch -n 1 'sudo asterisk -rx "core show channels verbose"'</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="extension peers">
                <div class="command-header">
                    <h3>List All Extensions</h3>
                    <button class="favorite-btn" data-command="peers-all">☆</button>
                </div>
                <p class="command-description">Display all configured PJSIP contacts/extensions.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-rx</code> runs an Asterisk CLI command and exits.
                </div>
                <div class="command-block">
                    <code>sudo asterisk -rx 'pjsip show contacts'</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            </div>
        </section>

        <section id="system" class="command-category">
            <h2 class="category-toggle">System Resources & Performance</h2>
            <div class="category-content">
            
            <div class="command-card" data-tags="cpu cores">
                <div class="command-header">
                    <h3>View CPU Information</h3>
                    <button class="favorite-btn" data-command="cpu-info">☆</button>
                </div>
                <p class="command-description">Display CPU architecture information.</p>
                <div class="command-block">
                    <code>lscpu</code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block">
                    <code>nproc</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="disk space df">
                <div class="command-header">
                    <h3>Check Disk Space</h3>
                    <button class="favorite-btn" data-command="df">☆</button>
                </div>
                <p class="command-description">Display available disk space.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-h</code> shows sizes in human-readable units.
                </div>
                <div class="command-block">
                    <code>df -h</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="memory ram free">
                <div class="command-header">
                    <h3>Check Memory Usage</h3>
                    <button class="favorite-btn" data-command="free">☆</button>
                </div>
                <p class="command-description">Display current memory usage.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-h</code> shows sizes in human-readable units.
                </div>
                <div class="command-block">
                    <code>free -h</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="top processes">
                <div class="command-header">
                    <h3>Monitor Running Processes</h3>
                    <button class="favorite-btn" data-command="top">☆</button>
                </div>
                <p class="command-description">Real-time view of system processes.</p>
                <div class="command-block">
                    <code>top</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="uptime load">
                <div class="command-header">
                    <h3>System Uptime & Load</h3>
                    <button class="favorite-btn" data-command="uptime">☆</button>
                </div>
                <p class="command-description">Show system uptime and load averages.</p>
                <div class="command-block">
                    <code>uptime</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="sar performance today cpu">
                <div class="command-header">
                    <h3>SAR Quick View (Today)</h3>
                    <button class="favorite-btn" data-command="sar-today">☆</button>
                </div>
                <p class="command-description">View current day performance stats.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-p</code> prints output in a more readable format.
                </div>
                <div class="command-block">
                    <code>sar -p</code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block">
                    <code>sar</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="oom memory">
                <div class="command-header">
                    <h3>Check for OOM Killer Events</h3>
                    <button class="favorite-btn" data-command="grep-oom">☆</button>
                </div>
                <p class="command-description">Search for Out-Of-Memory killer events.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-i</code> ignores case while matching.
                </div>
                <div class="command-block">
                    <code>grep -i oom /var/log/syslog</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            </div>
        </section>

        <section id="services" class="command-category">
            <h2 class="category-toggle">Service Controls (systemctl)</h2>
            <div class="category-content">
            
            <div class="command-card" data-tags="systemctl services asterisk fail2ban status restart start stop">
                <div class="command-header">
                    <h3>Manage Services</h3>
                    <button class="favorite-btn" data-command="systemctl-manage">☆</button>
                </div>
                <p class="command-description">Used to start, restart, stop, or view the status of systemctl services.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>--type=service</code> limits output to service units.
                </div>
                <div class="command-block">
                    <code>systemctl list-units --type=service</code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block" data-template="systemctl status {service}">
                    <code>systemctl status <span class="placeholder">asterisk|fail2ban</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block" data-template="sudo systemctl start {service}">
                    <code>sudo systemctl start <span class="placeholder">asterisk|fail2ban</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block" data-template="sudo systemctl restart {service}">
                    <code>sudo systemctl restart <span class="placeholder">asterisk|fail2ban</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block" data-template="sudo systemctl stop {service}">
                    <code>sudo systemctl stop <span class="placeholder">asterisk|fail2ban</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-notes">
                    <strong>⚠️ Note:</strong> Restarting Asterisk terminates all active calls.
                </div>
            </div>

            </div>
        </section>

        <section id="files" class="command-category">
            <h2 class="category-toggle">Key File Paths</h2>
            <div class="category-content">

            <div class="command-card" data-tags="files spool voicemail tmp">
                <div class="command-header">
                    <h3>Spool (Temp & Voicemails)</h3>
                    <button class="favorite-btn" data-command="spool-asterisk">☆</button>
                </div>
                <p class="command-description">Asterisk spool directory for temp files and voicemails.</p>
                <div class="command-block">
                    <code>/var/spool/asterisk/tmp</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="files voicemail">
                <div class="command-header">
                    <h3>Voicemail Storage</h3>
                    <button class="favorite-btn" data-command="voicemail-location">☆</button>
                </div>
                <p class="command-description">Directory where voicemail recordings are stored (view voicemails here).</p>
                <div class="command-block">
                    <code>/var/spool/asterisk/voicemail/default</code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block" data-template="ls /var/spool/asterisk/voicemail/default/{mailbox}/INBOX">
                    <code>ls /var/spool/asterisk/voicemail/default/<span class="placeholder">mailbox</span>/INBOX</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="files tftp config">
                <div class="command-header">
                    <h3>TFTP Config Files</h3>
                    <button class="favorite-btn" data-command="tftp-config">☆</button>
                </div>
                <p class="command-description">TFTP boot config directory.</p>
                <div class="command-block">
                    <code>/tftpboot/config</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="files moh">
                <div class="command-header">
                    <h3>Music on Hold</h3>
                    <button class="favorite-btn" data-command="moh-location">☆</button>
                </div>
                <p class="command-description">Asterisk MOH files directory (VAR &gt; LIB &gt; ASTERISK &gt; MOH).</p>
                <div class="command-block">
                    <code>/var/lib/asterisk/moh</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="files mail log">
                <div class="command-header">
                    <h3>Mail Log</h3>
                    <button class="favorite-btn" data-command="mail-log">☆</button>
                </div>
                <p class="command-description">System mail log file.</p>
                <div class="command-block">
                    <code>/var/log/maillog</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            </div>
        </section>

        <section id="find" class="command-category">
            <h2 class="category-toggle">Find Commands</h2>
            <div class="category-content">
            
            <div class="command-card" data-tags="find search file">
                <div class="command-header">
                    <h3>Find File by Name</h3>
                    <button class="favorite-btn" data-command="find-name">☆</button>
                </div>
                <p class="command-description">Search the entire filesystem for a file.</p>
                <div class="command-notes">
                    <strong>Flags:</strong> <code>-name</code> matches by filename; <code>2&gt;/dev/null</code> hides permission errors.
                </div>
                <div class="command-block" data-template="find / -name {filename} 2>/dev/null">
                    <code>find / -name <span class="placeholder">filename.ext</span> 2>/dev/null</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="find directory">
                <div class="command-header">
                    <h3>Find Directory by Name</h3>
                    <button class="favorite-btn" data-command="find-directory">☆</button>
                </div>
                <p class="command-description">Search for directories/folders by name.</p>
                <div class="command-notes">
                    <strong>Flags:</strong> <code>-type d</code> limits results to directories; <code>-name</code> matches by name; <code>2&gt;/dev/null</code> hides permission errors.
                </div>
                <div class="command-block" data-template="find / -type d -name {dirname} 2>/dev/null">
                    <code>find / -type d -name <span class="placeholder">directory_name</span> 2>/dev/null</code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            <div class="command-card" data-tags="realpath readlink exact path">
                <div class="command-header">
                    <h3>Get Real Path</h3>
                    <button class="favorite-btn" data-command="realpath">☆</button>
                </div>
                <p class="command-description">Resolve the absolute path of a file or symlink.</p>
                <div class="command-notes">
                    <strong>Flag:</strong> <code>-f</code> resolves all symlinks to the final target.
                </div>
                <div class="command-block" data-template="realpath {path}">
                    <code>realpath <span class="placeholder">/path/to/file</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
                <div class="command-block" data-template="readlink -f {path}">
                    <code>readlink -f <span class="placeholder">/path/to/file</span></code>
                    <button class="copy-btn">Copy</button>
                </div>
            </div>

            </div>
        </section>

        <button class="back-to-top" id="backToTop">↑</button>

    </main>

    <div class="contact-modal" id="contactModal">
        <div class="contact-modal-content">
            <div class="contact-modal-header">
                <h3>Get in Touch</h3>
                <button class="contact-modal-close" type="button" id="contactModalClose">✕</button>
            </div>
            <div class="contact-modal-links">
                <a href="mailto:daviddipiazza29@gmail.com" class="contact-link">Email</a>
                <a href="https://www.linkedin.com/in/david-dipiazza/" target="_blank" class="contact-link">LinkedIn</a>
                <a href="https://github.com/CodeGoat29" target="_blank" class="contact-link">GitHub</a>
            </div>
        </div>
    </div>

            <footer class="site-footer">
        <div class="container footer-grid">
            <div>
                <h4>Explore</h4>
                <ul>
                    <li><a href="../resources.html">Resources</a></li>
                    <li><a href="../blog.html">Blog</a></li>
                    <li><a href="../resume.html">Resume</a></li>
                </ul>
            </div>
            <div>
                <h4>Connect</h4>
                <ul>
                    <li><a href="mailto:daviddipiazza29@gmail.com">Email</a></li>
                    <li><a href="https://www.linkedin.com/in/david-dipiazza/" target="_blank">LinkedIn</a></li>
                    <li><a href="https://github.com/CodeGoat29" target="_blank">GitHub</a></li>
                </ul>
            </div>
        </div>
        <div class="container footer-bar">
            <p>&copy; 2026 DiPiazza.org | All Rights Reserved</p>
        </div>
    </footer>

    <!-- Search Modal -->
    <div class="search-modal" id="searchModal">
        <div class="search-modal-content">
            <h3>Complete Command</h3>
            <div class="search-modal-fields" id="searchModalFields"></div>
            <div class="search-modal-buttons">
                <button class="search-modal-btn btn-cancel" id="searchModalCancel">Cancel</button>
                <button class="search-modal-btn btn-search" id="searchModalSearch">Done</button>
            </div>
        </div>
    </div>

    <script>
        // Search functionality - FIXED
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        const commandCards = Array.from(document.querySelectorAll('.command-card'));

        function buildResultButton(card, label, meta) {
            if (!card.id) {
                card.id = `command-card-${Math.random().toString(36).slice(2, 9)}`;
            }
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'search-result';
            btn.dataset.targetId = card.id;
            btn.innerHTML = `${label}${meta ? `<small>${meta}</small>` : ''}`;
            return btn;
        }

        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase().trim();
            searchResults.innerHTML = '';

            if (!searchTerm) {
                return;
            }

            const matches = commandCards.filter(card => {
                const tags = (card.getAttribute('data-tags') || '').toLowerCase();
                const title = (card.querySelector('h3')?.textContent || '').toLowerCase();
                const description = (card.querySelector('.command-description')?.textContent || '').toLowerCase();
                const notes = (card.querySelector('.command-notes')?.textContent || '').toLowerCase();
                const searchable = `${tags} ${title} ${description} ${notes}`;
                return searchable.includes(searchTerm);
            });

            if (matches.length === 0) {
                const empty = document.createElement('div');
                empty.className = 'search-result';
                empty.textContent = 'No matches found.';
                empty.style.cursor = 'default';
                searchResults.appendChild(empty);
                return;
            }

            matches.forEach(card => {
                const title = (card.querySelector('h3')?.textContent || 'Untitled').trim();
                const tags = card.getAttribute('data-tags') || '';
                searchResults.appendChild(buildResultButton(card, title, tags));
            });
        });

        searchResults.addEventListener('click', (e) => {
            const target = e.target.closest('.search-result');
            if (!target || !target.dataset.targetId) return;
            const card = document.getElementById(target.dataset.targetId);
            if (!card) return;
            const category = card.closest('.command-category');
            if (category) {
                const categoryContent = category.querySelector('.category-content');
                const categoryToggle = category.querySelector('.category-toggle');
                categoryContent.classList.remove('collapsed');
                categoryToggle.classList.remove('collapsed');
            }
            card.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });

        // Category toggle - FIXED
        document.querySelectorAll('.category-toggle').forEach(toggle => {
            toggle.addEventListener('click', () => {
                const content = toggle.nextElementSibling;
                toggle.classList.toggle('collapsed');
                content.classList.toggle('collapsed');
            });
        });

        // Copy functionality with fill-in modal
        const searchModal = document.getElementById('searchModal');
        const searchModalFields = document.getElementById('searchModalFields');
        const searchModalCancel = document.getElementById('searchModalCancel');
        const searchModalDone = document.getElementById('searchModalSearch');
        let currentCopyButton = null;
        let currentTemplate = null;

        function extractTemplateFields(template) {
            const fields = [];
            const matches = template.matchAll(/{([^}]+)}/g);
            for (const match of matches) {
                const field = match[1];
                if (!fields.includes(field)) {
                    fields.push(field);
                }
            }
            return fields;
        }

        function formatFieldLabel(field) {
            const map = {
                search: 'Search term',
                host: 'Hostname or IP',
                destination: 'Destination',
                channel: 'Channel name',
                filename: 'Filename',
                dirname: 'Directory name'
            };
            return map[field] || field.replace(/[-_]/g, ' ');
        }

        function setCopiedState(button) {
            if (!button) return;
            button.textContent = 'Copied!';
            button.classList.add('copied');
            setTimeout(() => {
                button.textContent = 'Copy';
                button.classList.remove('copied');
            }, 2000);
        }

        function openFillModal(button, commandBlock) {
            const template = commandBlock.getAttribute('data-template');
            if (!template) return;
            const fields = extractTemplateFields(template);
            if (fields.length === 0) {
                return;
            }

            currentCopyButton = button;
            currentTemplate = template;
            searchModalFields.innerHTML = '';

            fields.forEach(field => {
                const label = formatFieldLabel(field);
                const wrapper = document.createElement('label');
                wrapper.className = 'search-modal-field';
                const title = document.createElement('span');
                title.textContent = label;
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'search-modal-input';
                input.dataset.field = field;
                input.placeholder = label;
                wrapper.appendChild(title);
                wrapper.appendChild(input);
                searchModalFields.appendChild(wrapper);
            });

            searchModal.classList.add('show');
            const firstInput = searchModalFields.querySelector('.search-modal-input');
            if (firstInput) {
                firstInput.focus();
            }
        }

        function closeFillModal() {
            searchModal.classList.remove('show');
            currentCopyButton = null;
            currentTemplate = null;
            searchModalFields.innerHTML = '';
        }

        searchModalCancel.addEventListener('click', closeFillModal);

        searchModalDone.addEventListener('click', () => {
            if (!currentTemplate) return;
            let filled = currentTemplate;
            const inputs = Array.from(searchModalFields.querySelectorAll('.search-modal-input'));
            for (const input of inputs) {
                const value = input.value.trim();
                if (!value) {
                    alert('Please fill in all fields');
                    input.focus();
                    return;
                }
                const field = input.dataset.field;
                const fieldRegex = new RegExp(`{${field}}`, 'g');
                filled = filled.replace(fieldRegex, value);
            }

            navigator.clipboard.writeText(filled).then(() => {
                setCopiedState(currentCopyButton);
                closeFillModal();
            });
        });

        searchModal.addEventListener('click', (e) => {
            if (e.target.id === 'searchModal') {
                closeFillModal();
            }
        });

        searchModal.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                searchModalDone.click();
            }
        });

        function handleCopyClick(button) {
            const commandBlock = button.parentElement;
            const template = commandBlock.getAttribute('data-template');

            if (template) {
                const fields = extractTemplateFields(template);
                if (fields.length > 0) {
                    openFillModal(button, commandBlock);
                    return;
                }
                navigator.clipboard.writeText(template).then(() => {
                    setCopiedState(button);
                });
                return;
            }

            const code = commandBlock.querySelector('code');
            const text = code ? code.textContent : '';
            navigator.clipboard.writeText(text).then(() => {
                setCopiedState(button);
            });
        }

        document.querySelectorAll('.copy-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                handleCopyClick(this);
            });
        });

        // Back to top
        const backToTop = document.getElementById('backToTop');
        window.addEventListener('scroll', () => {
            backToTop.classList.toggle('show', window.scrollY > 300);
        });
        backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Favorites functionality
        let favorites = JSON.parse(localStorage.getItem('favoriteCommands') || '[]');

        function updateFavoritesDisplay() {
            const favoritesSection = document.getElementById('favoritesSection');
            const favoritesList = document.getElementById('favoritesList');
            
            if (favorites.length === 0) {
                favoritesSection.style.display = 'none';
                return;
            }
            
            favoritesSection.style.display = 'block';
            favoritesList.innerHTML = '';
            
            favorites.forEach(commandId => {
                const originalCard = document.querySelector(`[data-command="${commandId}"]`)?.closest('.command-card');
                if (originalCard) {
                    const clone = originalCard.cloneNode(true);
                    const cloneFavoriteBtn = clone.querySelector('.favorite-btn');
                    if (cloneFavoriteBtn) {
                        cloneFavoriteBtn.classList.add('active');
                        cloneFavoriteBtn.textContent = '★';
                        cloneFavoriteBtn.addEventListener('click', function() {
                            const id = this.getAttribute('data-command');
                            favorites = favorites.filter(favId => favId !== id);
                            localStorage.setItem('favoriteCommands', JSON.stringify(favorites));
                            updateFavoritesDisplay();
                            const originalBtn = document.querySelector(`[data-command="${id}"]`);
                            if (originalBtn) {
                                originalBtn.classList.remove('active');
                                originalBtn.textContent = '☆';
                            }
                        });
                    }
                    
                    // Re-attach copy button functionality to cloned buttons
                    clone.querySelectorAll('.copy-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            handleCopyClick(this);
                        });
                    });
                    
                    favoritesList.appendChild(clone);
                }
            });
        }

        document.querySelectorAll('.favorite-btn').forEach(btn => {
            const commandId = btn.getAttribute('data-command');
            if (favorites.includes(commandId)) {
                btn.classList.add('active');
                btn.textContent = '★';
            }
            
            btn.addEventListener('click', function() {
                const commandId = this.getAttribute('data-command');
                if (favorites.includes(commandId)) {
                    favorites = favorites.filter(id => id !== commandId);
                    this.classList.remove('active');
                    this.textContent = '☆';
                } else {
                    favorites.push(commandId);
                    this.classList.add('active');
                    this.textContent = '★';
                }
                localStorage.setItem('favoriteCommands', JSON.stringify(favorites));
                updateFavoritesDisplay();
            });
        });

        updateFavoritesDisplay();

    </script>
    <script src="../js/site.js"></script>
</body>
</html>
